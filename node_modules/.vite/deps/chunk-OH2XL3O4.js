import {
  require_cookieHandler,
  require_normalisedURLDomain,
  require_normalisedURLPath,
  require_recipe,
  require_recipe2,
  require_supertokens_website,
  require_utils,
  require_windowHandler,
  require_windowHandler2
} from "./chunk-DBOCH5ZF.js";
import {
  require_jsx_runtime
} from "./chunk-DT77FM6J.js";
import {
  require_react
} from "./chunk-4D5CYJYK.js";
import {
  __commonJS
} from "./chunk-CEQRFMJQ.js";

// node_modules/supertokens-website/utils/cookieHandler/index.js
var require_cookieHandler2 = __commonJS({
  "node_modules/supertokens-website/utils/cookieHandler/index.js"(exports) {
    "use strict";
    function __export(m) {
      for (var p in m)
        if (!exports.hasOwnProperty(p))
          exports[p] = m[p];
    }
    exports.__esModule = true;
    __export(require_cookieHandler());
  }
});

// node_modules/supertokens-web-js/lib/build/cookieHandler/index.js
var require_cookieHandler3 = __commonJS({
  "node_modules/supertokens-web-js/lib/build/cookieHandler/index.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.CookieHandlerReference = void 0;
    var cookieHandler_1 = require_cookieHandler2();
    Object.defineProperty(exports, "CookieHandlerReference", {
      enumerable: true,
      get: function() {
        return cookieHandler_1.CookieHandlerReference;
      }
    });
  }
});

// node_modules/supertokens-web-js/lib/build/postSuperTokensInitCallbacks.js
var require_postSuperTokensInitCallbacks = __commonJS({
  "node_modules/supertokens-web-js/lib/build/postSuperTokensInitCallbacks.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.PostSuperTokensInitCallbacks = void 0;
    var PostSuperTokensInitCallbacks = (
      /** @class */
      function() {
        function PostSuperTokensInitCallbacks2() {
        }
        PostSuperTokensInitCallbacks2.addPostInitCallback = function(cb) {
          PostSuperTokensInitCallbacks2.postInitCallbacks.push(cb);
        };
        PostSuperTokensInitCallbacks2.runPostInitCallbacks = function() {
          for (var _i = 0, _a = PostSuperTokensInitCallbacks2.postInitCallbacks; _i < _a.length; _i++) {
            var cb = _a[_i];
            cb();
          }
        };
        PostSuperTokensInitCallbacks2.postInitCallbacks = [];
        return PostSuperTokensInitCallbacks2;
      }()
    );
    exports.PostSuperTokensInitCallbacks = PostSuperTokensInitCallbacks;
  }
});

// node_modules/supertokens-web-js/lib/build/supertokens.js
var require_supertokens = __commonJS({
  "node_modules/supertokens-web-js/lib/build/supertokens.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var utils_1 = require_utils();
    var cookieHandler_1 = require_cookieHandler3();
    var windowHandler_1 = require_windowHandler2();
    var postSuperTokensInitCallbacks_1 = require_postSuperTokensInitCallbacks();
    var recipe_1 = require_recipe2();
    var SuperTokens = (
      /** @class */
      function() {
        function SuperTokens2(config) {
          var _this = this;
          this.recipeList = [];
          this.appInfo = (0, utils_1.normaliseInputAppInfoOrThrowError)(config.appInfo);
          if (config.recipeList === void 0 || config.recipeList.length === 0) {
            throw new Error(
              "Please provide at least one recipe to the supertokens.init function call. See https://supertokens.io/docs/emailpassword/quick-setup/frontend"
            );
          }
          var enableDebugLogs = false;
          if (config.enableDebugLogs !== void 0) {
            enableDebugLogs = config.enableDebugLogs;
          }
          var multitenancyFound = false;
          this.recipeList = config.recipeList.map(function(recipe) {
            var recipeInstance = recipe(_this.appInfo, config.clientType, enableDebugLogs);
            if (recipeInstance.config.recipeId === recipe_1.Recipe.RECIPE_ID) {
              multitenancyFound = true;
            }
            return recipeInstance;
          });
          if (!multitenancyFound) {
            this.recipeList.push(recipe_1.Recipe.init()(this.appInfo, config.clientType, enableDebugLogs));
          }
        }
        SuperTokens2.init = function(config) {
          cookieHandler_1.CookieHandlerReference.init(config.cookieHandler);
          windowHandler_1.WindowHandlerReference.init(config.windowHandler);
          if (SuperTokens2.instance !== void 0) {
            console.warn("SuperTokens was already initialized");
            return;
          }
          SuperTokens2.instance = new SuperTokens2(config);
          postSuperTokensInitCallbacks_1.PostSuperTokensInitCallbacks.runPostInitCallbacks();
        };
        SuperTokens2.getInstanceOrThrow = function() {
          if (SuperTokens2.instance === void 0) {
            var error = "SuperTokens must be initialized before calling this method.";
            error = (0, utils_1.checkForSSRErrorAndAppendIfNeeded)(error);
            throw new Error(error);
          }
          return SuperTokens2.instance;
        };
        SuperTokens2.reset = function() {
          if (!(0, utils_1.isTest)()) {
            console.warn("Calling reset() is only supported during testing");
            return;
          }
          SuperTokens2.instance = void 0;
          return;
        };
        return SuperTokens2;
      }()
    );
    exports.default = SuperTokens;
  }
});

// node_modules/supertokens-web-js/lib/build/index.js
var require_build = __commonJS({
  "node_modules/supertokens-web-js/lib/build/index.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.init = void 0;
    var supertokens_1 = require_supertokens();
    var SuperTokensAPIWrapper = (
      /** @class */
      function() {
        function SuperTokensAPIWrapper2() {
        }
        SuperTokensAPIWrapper2.init = function(config) {
          supertokens_1.default.init(config);
        };
        return SuperTokensAPIWrapper2;
      }()
    );
    exports.default = SuperTokensAPIWrapper;
    exports.init = SuperTokensAPIWrapper.init;
  }
});

// node_modules/supertokens-web-js/index.js
var require_supertokens_web_js = __commonJS({
  "node_modules/supertokens-web-js/index.js"(exports) {
    "use strict";
    function __export(m) {
      for (var p in m)
        if (!exports.hasOwnProperty(p))
          exports[p] = m[p];
    }
    exports.__esModule = true;
    __export(require_build());
  }
});

// node_modules/supertokens-web-js/utils/cookieHandler/index.js
var require_cookieHandler4 = __commonJS({
  "node_modules/supertokens-web-js/utils/cookieHandler/index.js"(exports) {
    "use strict";
    function __export(m) {
      for (var p in m)
        if (!exports.hasOwnProperty(p))
          exports[p] = m[p];
    }
    exports.__esModule = true;
    var d = require_cookieHandler3();
    if (d.default !== void 0) {
      __export(d);
    } else {
      __export({
        default: d,
        ...d
      });
    }
  }
});

// node_modules/supertokens-web-js/utils/postSuperTokensInitCallbacks.js
var require_postSuperTokensInitCallbacks2 = __commonJS({
  "node_modules/supertokens-web-js/utils/postSuperTokensInitCallbacks.js"(exports) {
    "use strict";
    function __export(m) {
      for (var p in m)
        if (!exports.hasOwnProperty(p))
          exports[p] = m[p];
    }
    exports.__esModule = true;
    __export(require_postSuperTokensInitCallbacks());
  }
});

// node_modules/supertokens-web-js/utils/windowHandler/index.js
var require_windowHandler3 = __commonJS({
  "node_modules/supertokens-web-js/utils/windowHandler/index.js"(exports) {
    "use strict";
    function __export(m) {
      for (var p in m)
        if (!exports.hasOwnProperty(p))
          exports[p] = m[p];
    }
    exports.__esModule = true;
    __export(require_windowHandler2());
  }
});

// node_modules/supertokens-web-js/lib/build/recipe/session/index.js
var require_session = __commonJS({
  "node_modules/supertokens-web-js/lib/build/recipe/session/index.js"(exports) {
    "use strict";
    var __awaiter = exports && exports.__awaiter || function(thisArg, _arguments, P, generator) {
      function adopt(value) {
        return value instanceof P ? value : new P(function(resolve) {
          resolve(value);
        });
      }
      return new (P || (P = Promise))(function(resolve, reject) {
        function fulfilled(value) {
          try {
            step(generator.next(value));
          } catch (e) {
            reject(e);
          }
        }
        function rejected(value) {
          try {
            step(generator["throw"](value));
          } catch (e) {
            reject(e);
          }
        }
        function step(result) {
          result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
        }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
      });
    };
    var __generator = exports && exports.__generator || function(thisArg, body) {
      var _ = {
        label: 0,
        sent: function() {
          if (t[0] & 1)
            throw t[1];
          return t[1];
        },
        trys: [],
        ops: []
      }, f, y, t, g;
      return g = { next: verb(0), throw: verb(1), return: verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
      }), g;
      function verb(n) {
        return function(v) {
          return step([n, v]);
        };
      }
      function step(op) {
        if (f)
          throw new TypeError("Generator is already executing.");
        while (_)
          try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done)
              return t;
            if (y = 0, t)
              op = [op[0] & 2, t.value];
            switch (op[0]) {
              case 0:
              case 1:
                t = op;
                break;
              case 4:
                _.label++;
                return { value: op[1], done: false };
              case 5:
                _.label++;
                y = op[1];
                op = [0];
                continue;
              case 7:
                op = _.ops.pop();
                _.trys.pop();
                continue;
              default:
                if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                  _ = 0;
                  continue;
                }
                if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                  _.label = op[1];
                  break;
                }
                if (op[0] === 6 && _.label < t[1]) {
                  _.label = t[1];
                  t = op;
                  break;
                }
                if (t && _.label < t[2]) {
                  _.label = t[2];
                  _.ops.push(op);
                  break;
                }
                if (t[2])
                  _.ops.pop();
                _.trys.pop();
                continue;
            }
            op = body.call(thisArg, _);
          } catch (e) {
            op = [6, e];
            y = 0;
          } finally {
            f = t = 0;
          }
        if (op[0] & 5)
          throw op[1];
        return { value: op[0] ? op[1] : void 0, done: true };
      }
    };
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.getInvalidClaimsFromResponse = exports.getClaimValue = exports.validateClaims = exports.signOut = exports.addAxiosInterceptors = exports.doesSessionExist = exports.attemptRefreshingSession = exports.getAccessToken = exports.getAccessTokenPayloadSecurely = exports.getUserId = exports.init = exports.BooleanClaim = exports.PrimitiveArrayClaim = exports.PrimitiveClaim = void 0;
    var utils_1 = require_utils();
    var recipe_1 = require_recipe();
    var RecipeWrapper = (
      /** @class */
      function() {
        function RecipeWrapper2() {
        }
        RecipeWrapper2.init = function(config) {
          return recipe_1.default.init(config);
        };
        RecipeWrapper2.getUserId = function(input) {
          return recipe_1.default.getInstanceOrThrow().getUserId({
            userContext: (0, utils_1.getNormalisedUserContext)(
              input === null || input === void 0 ? void 0 : input.userContext
            )
          });
        };
        RecipeWrapper2.getAccessToken = function(input) {
          return recipe_1.default.getInstanceOrThrow().getAccessToken({
            userContext: (0, utils_1.getNormalisedUserContext)(
              input === null || input === void 0 ? void 0 : input.userContext
            )
          });
        };
        RecipeWrapper2.getAccessTokenPayloadSecurely = function(input) {
          return __awaiter(this, void 0, void 0, function() {
            return __generator(this, function(_a) {
              return [
                2,
                recipe_1.default.getInstanceOrThrow().getAccessTokenPayloadSecurely({
                  userContext: (0, utils_1.getNormalisedUserContext)(
                    input === null || input === void 0 ? void 0 : input.userContext
                  )
                })
              ];
            });
          });
        };
        RecipeWrapper2.attemptRefreshingSession = function() {
          return __awaiter(this, void 0, void 0, function() {
            return __generator(this, function(_a) {
              return [2, recipe_1.default.getInstanceOrThrow().attemptRefreshingSession()];
            });
          });
        };
        RecipeWrapper2.doesSessionExist = function(input) {
          return recipe_1.default.getInstanceOrThrow().doesSessionExist({
            userContext: (0, utils_1.getNormalisedUserContext)(
              input === null || input === void 0 ? void 0 : input.userContext
            )
          });
        };
        RecipeWrapper2.addAxiosInterceptors = function(axiosInstance, userContext) {
          return recipe_1.default.addAxiosInterceptors(axiosInstance, (0, utils_1.getNormalisedUserContext)(userContext));
        };
        RecipeWrapper2.signOut = function(input) {
          return recipe_1.default.getInstanceOrThrow().signOut({
            userContext: (0, utils_1.getNormalisedUserContext)(
              input === null || input === void 0 ? void 0 : input.userContext
            )
          });
        };
        RecipeWrapper2.getClaimValue = function(input) {
          return recipe_1.default.getInstanceOrThrow().getClaimValue({
            claim: input.claim,
            userContext: (0, utils_1.getNormalisedUserContext)(
              input === null || input === void 0 ? void 0 : input.userContext
            )
          });
        };
        RecipeWrapper2.validateClaims = function(input) {
          return recipe_1.default.getInstanceOrThrow().validateClaims({
            overrideGlobalClaimValidators: input === null || input === void 0 ? void 0 : input.overrideGlobalClaimValidators,
            userContext: (0, utils_1.getNormalisedUserContext)(
              input === null || input === void 0 ? void 0 : input.userContext
            )
          });
        };
        RecipeWrapper2.getInvalidClaimsFromResponse = function(input) {
          return recipe_1.default.getInstanceOrThrow().getInvalidClaimsFromResponse({
            response: input.response,
            userContext: (0, utils_1.getNormalisedUserContext)(
              input === null || input === void 0 ? void 0 : input.userContext
            )
          });
        };
        return RecipeWrapper2;
      }()
    );
    exports.default = RecipeWrapper;
    var init = RecipeWrapper.init;
    exports.init = init;
    var getUserId = RecipeWrapper.getUserId;
    exports.getUserId = getUserId;
    var getAccessTokenPayloadSecurely = RecipeWrapper.getAccessTokenPayloadSecurely;
    exports.getAccessTokenPayloadSecurely = getAccessTokenPayloadSecurely;
    var getAccessToken = RecipeWrapper.getAccessToken;
    exports.getAccessToken = getAccessToken;
    var attemptRefreshingSession = RecipeWrapper.attemptRefreshingSession;
    exports.attemptRefreshingSession = attemptRefreshingSession;
    var doesSessionExist = RecipeWrapper.doesSessionExist;
    exports.doesSessionExist = doesSessionExist;
    var addAxiosInterceptors = RecipeWrapper.addAxiosInterceptors;
    exports.addAxiosInterceptors = addAxiosInterceptors;
    var signOut = RecipeWrapper.signOut;
    exports.signOut = signOut;
    var validateClaims = RecipeWrapper.validateClaims;
    exports.validateClaims = validateClaims;
    var getClaimValue = RecipeWrapper.getClaimValue;
    exports.getClaimValue = getClaimValue;
    var getInvalidClaimsFromResponse = RecipeWrapper.getInvalidClaimsFromResponse;
    exports.getInvalidClaimsFromResponse = getInvalidClaimsFromResponse;
    var supertokens_website_1 = require_supertokens_website();
    Object.defineProperty(exports, "PrimitiveClaim", {
      enumerable: true,
      get: function() {
        return supertokens_website_1.PrimitiveClaim;
      }
    });
    Object.defineProperty(exports, "PrimitiveArrayClaim", {
      enumerable: true,
      get: function() {
        return supertokens_website_1.PrimitiveArrayClaim;
      }
    });
    Object.defineProperty(exports, "BooleanClaim", {
      enumerable: true,
      get: function() {
        return supertokens_website_1.BooleanClaim;
      }
    });
  }
});

// node_modules/supertokens-web-js/lib/build/recipe/multitenancy/allowedDomainsClaim.js
var require_allowedDomainsClaim = __commonJS({
  "node_modules/supertokens-web-js/lib/build/recipe/multitenancy/allowedDomainsClaim.js"(exports) {
    "use strict";
    var __extends = exports && exports.__extends || /* @__PURE__ */ function() {
      var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
          d2.__proto__ = b2;
        } || function(d2, b2) {
          for (var p in b2)
            if (Object.prototype.hasOwnProperty.call(b2, p))
              d2[p] = b2[p];
        };
        return extendStatics(d, b);
      };
      return function(d, b) {
        if (typeof b !== "function" && b !== null)
          throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
          this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
      };
    }();
    var __assign = exports && exports.__assign || function() {
      __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
          s = arguments[i];
          for (var p in s)
            if (Object.prototype.hasOwnProperty.call(s, p))
              t[p] = s[p];
        }
        return t;
      };
      return __assign.apply(this, arguments);
    };
    var __awaiter = exports && exports.__awaiter || function(thisArg, _arguments, P, generator) {
      function adopt(value) {
        return value instanceof P ? value : new P(function(resolve) {
          resolve(value);
        });
      }
      return new (P || (P = Promise))(function(resolve, reject) {
        function fulfilled(value) {
          try {
            step(generator.next(value));
          } catch (e) {
            reject(e);
          }
        }
        function rejected(value) {
          try {
            step(generator["throw"](value));
          } catch (e) {
            reject(e);
          }
        }
        function step(result) {
          result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
        }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
      });
    };
    var __generator = exports && exports.__generator || function(thisArg, body) {
      var _ = {
        label: 0,
        sent: function() {
          if (t[0] & 1)
            throw t[1];
          return t[1];
        },
        trys: [],
        ops: []
      }, f, y, t, g;
      return g = { next: verb(0), throw: verb(1), return: verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
      }), g;
      function verb(n) {
        return function(v) {
          return step([n, v]);
        };
      }
      function step(op) {
        if (f)
          throw new TypeError("Generator is already executing.");
        while (_)
          try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done)
              return t;
            if (y = 0, t)
              op = [op[0] & 2, t.value];
            switch (op[0]) {
              case 0:
              case 1:
                t = op;
                break;
              case 4:
                _.label++;
                return { value: op[1], done: false };
              case 5:
                _.label++;
                y = op[1];
                op = [0];
                continue;
              case 7:
                op = _.ops.pop();
                _.trys.pop();
                continue;
              default:
                if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                  _ = 0;
                  continue;
                }
                if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                  _.label = op[1];
                  break;
                }
                if (op[0] === 6 && _.label < t[1]) {
                  _.label = t[1];
                  t = op;
                  break;
                }
                if (t && _.label < t[2]) {
                  _.label = t[2];
                  _.ops.push(op);
                  break;
                }
                if (t[2])
                  _.ops.pop();
                _.trys.pop();
                continue;
            }
            op = body.call(thisArg, _);
          } catch (e) {
            op = [6, e];
            y = 0;
          } finally {
            f = t = 0;
          }
        if (op[0] & 5)
          throw op[1];
        return { value: op[0] ? op[1] : void 0, done: true };
      }
    };
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.AllowedDomainsClaim = exports.AllowedDomainsClaimClass = void 0;
    var windowHandler_1 = require_windowHandler();
    var session_1 = require_session();
    var AllowedDomainsClaimClass = (
      /** @class */
      function(_super) {
        __extends(AllowedDomainsClaimClass2, _super);
        function AllowedDomainsClaimClass2() {
          var _this = _super.call(this, {
            id: "st-t-dmns",
            refresh: function() {
              return __awaiter(_this, void 0, void 0, function() {
                return __generator(this, function(_a) {
                  return [
                    2
                    /*return*/
                  ];
                });
              });
            },
            defaultMaxAgeInSeconds: Number.MAX_SAFE_INTEGER
          }) || this;
          _this.validators = __assign(__assign({}, _this.validators), {
            hasAccessToCurrentDomain: function() {
              return {
                id: _this.id,
                refresh: _this.refresh,
                shouldRefresh: function() {
                  return false;
                },
                validate: function(payload, userContext) {
                  return __awaiter(_this, void 0, void 0, function() {
                    var currentDomain, includesValidator;
                    return __generator(this, function(_a) {
                      currentDomain = windowHandler_1.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHostName();
                      includesValidator = this.validators.includes(
                        currentDomain,
                        Number.MAX_SAFE_INTEGER,
                        this.id
                      );
                      return [2, includesValidator.validate(payload, userContext)];
                    });
                  });
                }
              };
            }
          });
          return _this;
        }
        return AllowedDomainsClaimClass2;
      }(session_1.PrimitiveArrayClaim)
    );
    exports.AllowedDomainsClaimClass = AllowedDomainsClaimClass;
    exports.AllowedDomainsClaim = new AllowedDomainsClaimClass();
  }
});

// node_modules/supertokens-web-js/lib/build/recipe/multitenancy/index.js
var require_multitenancy = __commonJS({
  "node_modules/supertokens-web-js/lib/build/recipe/multitenancy/index.js"(exports) {
    "use strict";
    var __assign = exports && exports.__assign || function() {
      __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
          s = arguments[i];
          for (var p in s)
            if (Object.prototype.hasOwnProperty.call(s, p))
              t[p] = s[p];
        }
        return t;
      };
      return __assign.apply(this, arguments);
    };
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.AllowedDomainsClaim = exports.getTenantId = exports.getLoginMethods = exports.init = void 0;
    var utils_1 = require_utils();
    var allowedDomainsClaim_1 = require_allowedDomainsClaim();
    Object.defineProperty(exports, "AllowedDomainsClaim", {
      enumerable: true,
      get: function() {
        return allowedDomainsClaim_1.AllowedDomainsClaim;
      }
    });
    var recipe_1 = require_recipe2();
    var RecipeWrapper = (
      /** @class */
      function() {
        function RecipeWrapper2() {
        }
        RecipeWrapper2.init = function(config) {
          return recipe_1.default.init(config);
        };
        RecipeWrapper2.getLoginMethods = function(input) {
          return recipe_1.default.getInstanceOrThrow().recipeImplementation.getLoginMethods(
            __assign(__assign({}, input), {
              userContext: (0, utils_1.getNormalisedUserContext)(
                input === null || input === void 0 ? void 0 : input.userContext
              )
            })
          );
        };
        RecipeWrapper2.getTenantId = function(input) {
          return recipe_1.default.getInstanceOrThrow().recipeImplementation.getTenantId(
            __assign(__assign({}, input), {
              userContext: (0, utils_1.getNormalisedUserContext)(
                input === null || input === void 0 ? void 0 : input.userContext
              )
            })
          );
        };
        RecipeWrapper2.AllowedDomainsClaim = allowedDomainsClaim_1.AllowedDomainsClaim;
        return RecipeWrapper2;
      }()
    );
    exports.default = RecipeWrapper;
    var init = RecipeWrapper.init;
    exports.init = init;
    var getLoginMethods = RecipeWrapper.getLoginMethods;
    exports.getLoginMethods = getLoginMethods;
    var getTenantId = RecipeWrapper.getTenantId;
    exports.getTenantId = getTenantId;
  }
});

// node_modules/supertokens-web-js/recipe/multitenancy/index.js
var require_multitenancy2 = __commonJS({
  "node_modules/supertokens-web-js/recipe/multitenancy/index.js"(exports) {
    "use strict";
    function __export(m) {
      for (var p in m)
        if (!exports.hasOwnProperty(p))
          exports[p] = m[p];
    }
    exports.__esModule = true;
    __export(require_multitenancy());
  }
});

// node_modules/supertokens-web-js/utils/index.js
var require_utils2 = __commonJS({
  "node_modules/supertokens-web-js/utils/index.js"(exports) {
    "use strict";
    function __export(m) {
      for (var p in m)
        if (!exports.hasOwnProperty(p))
          exports[p] = m[p];
    }
    exports.__esModule = true;
    var d = require_utils();
    if (d.default !== void 0) {
      __export(d);
    } else {
      __export({
        default: d,
        ...d
      });
    }
  }
});

// node_modules/supertokens-web-js/utils/normalisedURLDomain.js
var require_normalisedURLDomain2 = __commonJS({
  "node_modules/supertokens-web-js/utils/normalisedURLDomain.js"(exports) {
    "use strict";
    function __export(m) {
      for (var p in m)
        if (!exports.hasOwnProperty(p))
          exports[p] = m[p];
    }
    exports.__esModule = true;
    var d = require_normalisedURLDomain();
    if (d.default !== void 0) {
      __export(d);
    } else {
      __export({
        default: d,
        ...d
      });
    }
  }
});

// node_modules/supertokens-web-js/utils/normalisedURLPath.js
var require_normalisedURLPath2 = __commonJS({
  "node_modules/supertokens-web-js/utils/normalisedURLPath.js"(exports) {
    "use strict";
    function __export(m) {
      for (var p in m)
        if (!exports.hasOwnProperty(p))
          exports[p] = m[p];
    }
    exports.__esModule = true;
    var d = require_normalisedURLPath();
    if (d.default !== void 0) {
      __export(d);
    } else {
      __export({
        default: d,
        ...d
      });
    }
  }
});

// node_modules/supertokens-auth-react/lib/build/genericComponentOverrideContext.js
var require_genericComponentOverrideContext = __commonJS({
  "node_modules/supertokens-auth-react/lib/build/genericComponentOverrideContext.js"(exports) {
    "use strict";
    var SuperTokensWebJS = require_supertokens_web_js();
    var cookieHandler = require_cookieHandler4();
    var postSuperTokensInitCallbacks = require_postSuperTokensInitCallbacks2();
    var windowHandler = require_windowHandler3();
    var MultitenancyWebJS = require_multitenancy2();
    var utils = require_utils2();
    var React = require_react();
    var NormalisedURLDomain = require_normalisedURLDomain2();
    var NormalisedURLPath = require_normalisedURLPath2();
    var jsxRuntime = require_jsx_runtime();
    function _interopDefault(e) {
      return e && e.__esModule ? e : { default: e };
    }
    var SuperTokensWebJS__default = _interopDefault(SuperTokensWebJS);
    var MultitenancyWebJS__default = _interopDefault(MultitenancyWebJS);
    var React__default = _interopDefault(React);
    var NormalisedURLDomain__default = _interopDefault(NormalisedURLDomain);
    var NormalisedURLPath__default = _interopDefault(NormalisedURLPath);
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p in b2)
          if (Object.prototype.hasOwnProperty.call(b2, p))
            d2[p] = b2[p];
      };
      return extendStatics(d, b);
    };
    function __extends(d, b) {
      if (typeof b !== "function" && b !== null)
        throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }
    exports.__assign = function() {
      exports.__assign = Object.assign || function __assign(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
          s = arguments[i];
          for (var p in s)
            if (Object.prototype.hasOwnProperty.call(s, p))
              t[p] = s[p];
        }
        return t;
      };
      return exports.__assign.apply(this, arguments);
    };
    function __rest(s, e) {
      var t = {};
      for (var p in s)
        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
          t[p] = s[p];
      if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
            t[p[i]] = s[p[i]];
        }
      return t;
    }
    function __awaiter(thisArg, _arguments, P, generator) {
      function adopt(value) {
        return value instanceof P ? value : new P(function(resolve) {
          resolve(value);
        });
      }
      return new (P || (P = Promise))(function(resolve, reject) {
        function fulfilled(value) {
          try {
            step(generator.next(value));
          } catch (e) {
            reject(e);
          }
        }
        function rejected(value) {
          try {
            step(generator["throw"](value));
          } catch (e) {
            reject(e);
          }
        }
        function step(result) {
          result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
        }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
      });
    }
    function __generator(thisArg, body) {
      var _ = {
        label: 0,
        sent: function() {
          if (t[0] & 1)
            throw t[1];
          return t[1];
        },
        trys: [],
        ops: []
      }, f, y, t, g;
      return g = { next: verb(0), throw: verb(1), return: verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
        return this;
      }), g;
      function verb(n) {
        return function(v) {
          return step([n, v]);
        };
      }
      function step(op) {
        if (f)
          throw new TypeError("Generator is already executing.");
        while (g && (g = 0, op[0] && (_ = 0)), _)
          try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done)
              return t;
            if (y = 0, t)
              op = [op[0] & 2, t.value];
            switch (op[0]) {
              case 0:
              case 1:
                t = op;
                break;
              case 4:
                _.label++;
                return { value: op[1], done: false };
              case 5:
                _.label++;
                y = op[1];
                op = [0];
                continue;
              case 7:
                op = _.ops.pop();
                _.trys.pop();
                continue;
              default:
                if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                  _ = 0;
                  continue;
                }
                if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                  _.label = op[1];
                  break;
                }
                if (op[0] === 6 && _.label < t[1]) {
                  _.label = t[1];
                  t = op;
                  break;
                }
                if (t && _.label < t[2]) {
                  _.label = t[2];
                  _.ops.push(op);
                  break;
                }
                if (t[2])
                  _.ops.pop();
                _.trys.pop();
                continue;
            }
            op = body.call(thisArg, _);
          } catch (e) {
            op = [6, e];
            y = 0;
          } finally {
            f = t = 0;
          }
        if (op[0] & 5)
          throw op[1];
        return { value: op[0] ? op[1] : void 0, done: true };
      }
    }
    function __spreadArray(to, from, pack) {
      if (pack || arguments.length === 2)
        for (var i = 0, l = from.length, ar; i < l; i++) {
          if (ar || !(i in from)) {
            if (!ar)
              ar = Array.prototype.slice.call(from, 0, i);
            ar[i] = from[i];
          }
        }
      return to.concat(ar || Array.prototype.slice.call(from));
    }
    var RECIPE_ID_QUERY_PARAM = "rid";
    var DEFAULT_API_BASE_PATH = "/auth";
    var DEFAULT_WEBSITE_BASE_PATH = "/auth";
    var ST_ROOT_ID = "supertokens-root";
    var SSR_ERROR = "\nIf you are trying to use this method doing server-side-rendering, please make sure you move this method inside a componentDidMount method or useEffect hook.";
    function getRecipeIdFromSearch(search) {
      var urlParams = new URLSearchParams(search);
      return urlParams.get(RECIPE_ID_QUERY_PARAM);
    }
    function clearQueryParams(paramNames) {
      var newURL = new URL(windowHandler.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHref());
      for (var _i = 0, paramNames_1 = paramNames; _i < paramNames_1.length; _i++) {
        var param = paramNames_1[_i];
        newURL.searchParams.delete(param);
      }
      windowHandler.WindowHandlerReference.getReferenceOrThrow().windowHandler.history.replaceState(
        windowHandler.WindowHandlerReference.getReferenceOrThrow().windowHandler.history.getState(),
        "",
        windowHandler.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHref()
      );
    }
    function clearErrorQueryParam() {
      clearQueryParams(["error", "message"]);
    }
    function getQueryParams(param) {
      var urlParams = new URLSearchParams(
        windowHandler.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getSearch()
      );
      return urlParams.get(param);
    }
    function getURLHash() {
      return windowHandler.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHash().substr(1);
    }
    function getRedirectToPathFromURL() {
      var param = getQueryParams("redirectToPath");
      if (param === null) {
        return void 0;
      } else {
        try {
          var normalisedURLPath = new NormalisedURLPath__default.default(param).getAsStringDangerous();
          var pathQueryParams = param.split("?")[1] !== void 0 ? "?".concat(param.split("?")[1]) : "";
          return normalisedURLPath + pathQueryParams;
        } catch (_a) {
          return void 0;
        }
      }
    }
    function isTest() {
      try {
        return process.env.TEST_MODE === "testing";
      } catch (err) {
        return false;
      }
    }
    function normaliseInputAppInfoOrThrowError(appInfo) {
      if (appInfo === void 0) {
        throw new Error("Please provide the appInfo object when calling supertokens.init");
      }
      if (appInfo.apiDomain === void 0) {
        throw new Error("Please provide your apiDomain inside the appInfo object when calling supertokens.init");
      }
      if (appInfo.appName === void 0) {
        throw new Error("Please provide your appName inside the appInfo object when calling supertokens.init");
      }
      if (appInfo.websiteDomain === void 0) {
        throw new Error("Please provide your websiteDomain inside the appInfo object when calling supertokens.init");
      }
      var apiGatewayPath = new NormalisedURLPath__default.default("");
      if (appInfo.apiGatewayPath !== void 0) {
        apiGatewayPath = new NormalisedURLPath__default.default(appInfo.apiGatewayPath);
      }
      return {
        appName: appInfo.appName,
        apiDomain: new NormalisedURLDomain__default.default(appInfo.apiDomain),
        websiteDomain: new NormalisedURLDomain__default.default(appInfo.websiteDomain),
        apiBasePath: apiGatewayPath.appendPath(
          getNormalisedURLPathOrDefault(DEFAULT_API_BASE_PATH, appInfo.apiBasePath)
        ),
        websiteBasePath: getNormalisedURLPathOrDefault(DEFAULT_WEBSITE_BASE_PATH, appInfo.websiteBasePath)
      };
    }
    function getNormalisedURLPathOrDefault(defaultPath, path) {
      if (path !== void 0) {
        return new NormalisedURLPath__default.default(path);
      } else {
        return new NormalisedURLPath__default.default(defaultPath);
      }
    }
    function validateForm(inputs, configFormFields) {
      return __awaiter(this, void 0, void 0, function() {
        var validationErrors, _loop_1, i;
        return __generator(this, function(_a) {
          switch (_a.label) {
            case 0:
              validationErrors = [];
              if (configFormFields.length !== inputs.length) {
                throw Error("Are you sending too many / too few formFields?");
              }
              _loop_1 = function(i2) {
                var field, input, value, error;
                return __generator(this, function(_b) {
                  switch (_b.label) {
                    case 0:
                      field = configFormFields[i2];
                      input = inputs.find(function(i3) {
                        return i3.id === field.id;
                      });
                      value = input.value;
                      if (input.id === "email") {
                        value = value.trim();
                      }
                      return [4, field.validate(value)];
                    case 1:
                      error = _b.sent();
                      if (error !== void 0) {
                        validationErrors.push({
                          error,
                          id: field.id
                        });
                      }
                      return [
                        2
                        /*return*/
                      ];
                  }
                });
              };
              i = 0;
              _a.label = 1;
            case 1:
              if (!(i < configFormFields.length))
                return [3, 4];
              return [5, _loop_1(i)];
            case 2:
              _a.sent();
              _a.label = 3;
            case 3:
              i++;
              return [3, 1];
            case 4:
              return [2, validationErrors];
          }
        });
      });
    }
    function getCurrentNormalisedUrlPath() {
      return new NormalisedURLPath__default.default(
        windowHandler.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getPathName()
      );
    }
    function appendQueryParamsToURL(stringUrl, queryParams) {
      if (queryParams === void 0) {
        return stringUrl;
      }
      try {
        var url_1 = new URL(stringUrl);
        Object.entries(queryParams).forEach(function(_a) {
          var key = _a[0], value = _a[1];
          url_1.searchParams.set(key, value);
        });
        return url_1.href;
      } catch (e) {
        var fakeDomain = stringUrl.startsWith("/") ? "http:localhost" : "http://localhost/";
        var url_2 = new URL("".concat(fakeDomain).concat(stringUrl));
        Object.entries(queryParams).forEach(function(_a) {
          var key = _a[0], value = _a[1];
          url_2.searchParams.set(key, value);
        });
        return "".concat(url_2.pathname).concat(url_2.search);
      }
    }
    function appendTrailingSlashToURL(stringUrl) {
      return stringUrl.endsWith("/") ? stringUrl : stringUrl + "/";
    }
    function matchRecipeIdUsingQueryParams(recipeId) {
      return function() {
        var recipeIdFromSearch = getRecipeIdFromSearch(
          windowHandler.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getSearch()
        );
        return recipeIdFromSearch === recipeId;
      };
    }
    function redirectWithFullPageReload(to) {
      if (to.trim() === "") {
        to = "/";
      }
      windowHandler.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.setHref(to);
    }
    function redirectWithHistory(to, history) {
      if (to.trim() === "") {
        to = "/";
      }
      if (history.push !== void 0) {
        history.push(to);
      } else {
        history(to);
      }
    }
    function getOriginOfPage() {
      return new NormalisedURLDomain__default.default(
        windowHandler.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getOrigin()
      );
    }
    function getLocalStorage(key) {
      return __awaiter(this, void 0, void 0, function() {
        var res;
        return __generator(this, function(_a) {
          res = windowHandler.WindowHandlerReference.getReferenceOrThrow().windowHandler.localStorage.getItem(key);
          if (res === null || res === void 0) {
            return [2, null];
          }
          return [2, res];
        });
      });
    }
    function setLocalStorage(key, value) {
      return __awaiter(this, void 0, void 0, function() {
        return __generator(this, function(_a) {
          switch (_a.label) {
            case 0:
              return [
                4,
                windowHandler.WindowHandlerReference.getReferenceOrThrow().windowHandler.localStorage.setItem(
                  key,
                  value
                )
              ];
            case 1:
              _a.sent();
              return [
                2
                /*return*/
              ];
          }
        });
      });
    }
    function removeFromLocalStorage(key) {
      return __awaiter(this, void 0, void 0, function() {
        return __generator(this, function(_a) {
          switch (_a.label) {
            case 0:
              return [
                4,
                windowHandler.WindowHandlerReference.getReferenceOrThrow().windowHandler.localStorage.removeItem(
                  key
                )
              ];
            case 1:
              _a.sent();
              return [
                2
                /*return*/
              ];
          }
        });
      });
    }
    function mergeObjects(obj1, obj2) {
      var res = exports.__assign({}, obj1);
      for (var key in obj2) {
        if (typeof res[key] === "object" && typeof obj2[key] === "object") {
          res[key] = mergeObjects(res[key], obj2[key]);
        } else {
          res[key] = obj2[key];
        }
      }
      return res;
    }
    function normaliseCookieScopeOrThrowError(cookieScope) {
      function helper(cookieScope2) {
        cookieScope2 = cookieScope2.trim().toLowerCase();
        if (cookieScope2.startsWith(".")) {
          cookieScope2 = cookieScope2.substr(1);
        }
        if (!cookieScope2.startsWith("http://") && !cookieScope2.startsWith("https://")) {
          cookieScope2 = "http://" + cookieScope2;
        }
        try {
          var urlObj = new URL(cookieScope2);
          cookieScope2 = urlObj.hostname;
          if (cookieScope2.startsWith(".")) {
            cookieScope2 = cookieScope2.substr(1);
          }
          return cookieScope2;
        } catch (err) {
          throw new Error("Please provide a valid cookie scope");
        }
      }
      function isAnIpAddress(ipaddress) {
        return /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(
          ipaddress
        );
      }
      var noDotNormalised = helper(cookieScope);
      if (noDotNormalised === "localhost" || isAnIpAddress(noDotNormalised)) {
        return noDotNormalised;
      }
      if (cookieScope.startsWith(".")) {
        return "." + noDotNormalised;
      }
      return noDotNormalised;
    }
    function getDefaultCookieScope() {
      try {
        return normaliseCookieScopeOrThrowError(
          windowHandler.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHostName()
        );
      } catch (_a) {
        return void 0;
      }
    }
    function getCookieValue(name) {
      return __awaiter(this, void 0, void 0, function() {
        var value, _a, parts, last, temp;
        return __generator(this, function(_b) {
          switch (_b.label) {
            case 0:
              _a = "; ";
              return [
                4,
                cookieHandler.CookieHandlerReference.getReferenceOrThrow().cookieHandler.getCookie()
              ];
            case 1:
              value = _a + _b.sent();
              parts = value.split("; " + name + "=");
              if (parts.length >= 2) {
                last = parts.pop();
                if (last !== void 0) {
                  temp = last.split(";").shift();
                  if (temp === void 0) {
                    return [2, null];
                  }
                  return [2, temp];
                }
              }
              return [2, null];
          }
        });
      });
    }
    function setFrontendCookie(name, value, scope) {
      return __awaiter(this, void 0, void 0, function() {
        var expires, cookieVal;
        return __generator(this, function(_a) {
          switch (_a.label) {
            case 0:
              expires = "Thu, 01 Jan 1970 00:00:01 GMT";
              cookieVal = "";
              if (value !== void 0) {
                cookieVal = value;
                expires = void 0;
              }
              if (!(scope === "localhost" || scope === windowHandler.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHostName() || scope === void 0))
                return [3, 5];
              if (!(expires !== void 0))
                return [3, 2];
              return [
                4,
                cookieHandler.CookieHandlerReference.getReferenceOrThrow().cookieHandler.setCookie(
                  "".concat(name, "=").concat(cookieVal, ";expires=").concat(expires, ";path=/;samesite=lax")
                )
              ];
            case 1:
              _a.sent();
              return [3, 4];
            case 2:
              return [
                4,
                cookieHandler.CookieHandlerReference.getReferenceOrThrow().cookieHandler.setCookie(
                  "".concat(name, "=").concat(cookieVal, ";expires=Fri, 31 Dec 9999 23:59:59 GMT;path=/;samesite=lax")
                )
              ];
            case 3:
              _a.sent();
              _a.label = 4;
            case 4:
              return [3, 9];
            case 5:
              if (!(expires !== void 0))
                return [3, 7];
              return [
                4,
                cookieHandler.CookieHandlerReference.getReferenceOrThrow().cookieHandler.setCookie(
                  "".concat(name, "=").concat(cookieVal, ";expires=").concat(expires, ";domain=").concat(scope, ";path=/;samesite=lax")
                )
              ];
            case 6:
              _a.sent();
              return [3, 9];
            case 7:
              return [
                4,
                cookieHandler.CookieHandlerReference.getReferenceOrThrow().cookieHandler.setCookie(
                  "".concat(name, "=").concat(cookieVal, ";domain=").concat(scope, ";expires=Fri, 31 Dec 9999 23:59:59 GMT;path=/;samesite=lax")
                )
              ];
            case 8:
              _a.sent();
              _a.label = 9;
            case 9:
              return [
                2
                /*return*/
              ];
          }
        });
      });
    }
    function getNormalisedUserContext(userContext) {
      return userContext === void 0 ? {} : userContext;
    }
    var useOnMountAPICall = function(fetch, handleResponse, handleError, startLoading) {
      if (startLoading === void 0) {
        startLoading = true;
      }
      var consumeReq = React.useRef();
      var _a = React.useState(void 0), error = _a[0], setError = _a[1];
      React.useEffect(
        function() {
          var effect = function(signal) {
            return __awaiter(void 0, void 0, void 0, function() {
              var resp, err_1;
              return __generator(this, function(_a2) {
                switch (_a2.label) {
                  case 0:
                    _a2.trys.push([0, 2, , 3]);
                    if (consumeReq.current === void 0) {
                      consumeReq.current = fetch();
                    }
                    return [4, consumeReq.current];
                  case 1:
                    resp = _a2.sent();
                    if (!signal.aborted) {
                      void handleResponse(resp);
                    }
                    return [3, 3];
                  case 2:
                    err_1 = _a2.sent();
                    if (!signal.aborted) {
                      if (handleError !== void 0) {
                        handleError(err_1, resp);
                      } else {
                        setError(err_1);
                      }
                    }
                    return [3, 3];
                  case 3:
                    return [
                      2
                      /*return*/
                    ];
                }
              });
            });
          };
          if (startLoading) {
            var ctrl_1 = new AbortController();
            void effect(ctrl_1.signal);
            return function() {
              ctrl_1.abort();
            };
          }
          return;
        },
        [setError, consumeReq, fetch, handleResponse, handleError, startLoading]
      );
      if (error) {
        throw error;
      }
    };
    var BaseRecipeModule = (
      /** @class */
      /* @__PURE__ */ function() {
        function BaseRecipeModule2(config) {
          this.config = config;
        }
        return BaseRecipeModule2;
      }()
    );
    function normaliseRecipeModuleConfig(config) {
      var _this = this;
      if (config === void 0) {
        config = {};
      }
      var onHandleEvent = config.onHandleEvent, getRedirectionURL = config.getRedirectionURL, preAPIHook = config.preAPIHook, postAPIHook = config.postAPIHook;
      if (onHandleEvent === void 0) {
        onHandleEvent = function(_) {
        };
      }
      if (getRedirectionURL === void 0) {
        getRedirectionURL = function(_) {
          return __awaiter(_this, void 0, void 0, function() {
            return __generator(this, function(_a) {
              return [2, void 0];
            });
          });
        };
      }
      if (preAPIHook === void 0) {
        preAPIHook = function(context) {
          return __awaiter(_this, void 0, void 0, function() {
            return __generator(this, function(_a) {
              return [2, context];
            });
          });
        };
      }
      if (postAPIHook === void 0) {
        postAPIHook = function() {
          return __awaiter(_this, void 0, void 0, function() {
            return __generator(this, function(_a) {
              return [
                2
                /*return*/
              ];
            });
          });
        };
      }
      var useShadowDom = config.useShadowDom === void 0 ? true : config.useShadowDom;
      useShadowDom = getShouldUseShadowDomBasedOnBrowser(useShadowDom);
      var rootStyle = config.style === void 0 ? "" : config.style;
      return exports.__assign(exports.__assign({}, config), {
        getRedirectionURL,
        onHandleEvent,
        preAPIHook,
        postAPIHook,
        useShadowDom,
        rootStyle
      });
    }
    function getShouldUseShadowDomBasedOnBrowser(useShadowDom) {
      return useShadowDom !== void 0 ? useShadowDom : true;
    }
    function normaliseMultitenancyConfig(config) {
      return exports.__assign(exports.__assign({}, normaliseRecipeModuleConfig(config)), {
        override: exports.__assign(
          {
            functions: function(originalImplementation) {
              return originalImplementation;
            }
          },
          config === null || config === void 0 ? void 0 : config.override
        )
      });
    }
    function hasIntersectingRecipes(tenantMethods, recipeList) {
      var _loop_1 = function(key2) {
        var hasIntersection = recipeList.some(function(recipe) {
          if (tenantMethods[key2].enabled) {
            return recipe.recipeID === key2 || recipe.recipeID.includes(key2);
          }
          return false;
        });
        if (hasIntersection === true) {
          return { value: true };
        }
      };
      for (var key in tenantMethods) {
        var state_1 = _loop_1(key);
        if (typeof state_1 === "object")
          return state_1.value;
      }
      return false;
    }
    var Multitenancy = (
      /** @class */
      function(_super) {
        __extends(Multitenancy2, _super);
        function Multitenancy2(config, webJSRecipe) {
          if (webJSRecipe === void 0) {
            webJSRecipe = MultitenancyWebJS__default.default;
          }
          var _this = _super.call(this, config) || this;
          _this.webJSRecipe = webJSRecipe;
          _this.recipeID = Multitenancy2.RECIPE_ID;
          _this.dynamicLoginMethodsCache = {};
          return _this;
        }
        Multitenancy2.prototype.getCurrentDynamicLoginMethods = function(input) {
          var _a;
          return __awaiter(this, void 0, void 0, function() {
            var userContext, tenantId, tenantMethods;
            return __generator(this, function(_b) {
              switch (_b.label) {
                case 0:
                  if (SuperTokens.usesDynamicLoginMethods === false) {
                    return [2, void 0];
                  }
                  userContext = utils.getNormalisedUserContext(input.userContext);
                  return [4, Multitenancy2.getInstanceOrThrow().webJSRecipe.getTenantId()];
                case 1:
                  tenantId = (_a = _b.sent()) !== null && _a !== void 0 ? _a : "public";
                  if (this.dynamicLoginMethodsCache[tenantId] === void 0) {
                    this.dynamicLoginMethodsCache[tenantId] = Multitenancy2.getDynamicLoginMethods({
                      tenantId,
                      userContext
                    });
                  }
                  return [4, this.dynamicLoginMethodsCache[tenantId]];
                case 2:
                  tenantMethods = _b.sent();
                  if (!hasIntersectingRecipes(tenantMethods, SuperTokens.getInstanceOrThrow().recipeList)) {
                    throw new Error(
                      "Initialized recipes have no overlap with core recipes or could not load login methods"
                    );
                  }
                  return [2, tenantMethods];
              }
            });
          });
        };
        Multitenancy2.getDynamicLoginMethods = function(input) {
          return __awaiter(this, void 0, void 0, function() {
            var _a, emailPassword, passwordless, thirdParty;
            return __generator(this, function(_b) {
              switch (_b.label) {
                case 0:
                  return [4, MultitenancyWebJS__default.default.getLoginMethods(input)];
                case 1:
                  _a = _b.sent(), emailPassword = _a.emailPassword, passwordless = _a.passwordless, thirdParty = _a.thirdParty;
                  return [
                    2,
                    {
                      passwordless,
                      emailpassword: emailPassword,
                      thirdparty: thirdParty
                    }
                  ];
              }
            });
          });
        };
        Multitenancy2.init = function(config) {
          var normalisedConfig = normaliseMultitenancyConfig(config);
          return {
            recipeID: Multitenancy2.RECIPE_ID,
            authReact: function(appInfo) {
              Multitenancy2.instance = new Multitenancy2(
                exports.__assign(exports.__assign({}, normalisedConfig), {
                  appInfo,
                  recipeId: Multitenancy2.RECIPE_ID
                })
              );
              return Multitenancy2.instance;
            },
            webJS: MultitenancyWebJS__default.default.init(exports.__assign({}, normalisedConfig))
          };
        };
        Multitenancy2.getInstanceOrThrow = function() {
          if (Multitenancy2.instance === void 0) {
            var error = "No instance of Multitenancy found. Make sure to call the Multitenancy.init method.See https://supertokens.io/docs/multitenancy/quick-setup/frontend";
            if (typeof window === "undefined") {
              error = error + SSR_ERROR;
            }
            throw Error(error);
          }
          return Multitenancy2.instance;
        };
        Multitenancy2.reset = function() {
          if (!isTest()) {
            return;
          }
          Multitenancy2.instance = void 0;
          return;
        };
        Multitenancy2.RECIPE_ID = "multitenancy";
        return Multitenancy2;
      }(BaseRecipeModule)
    );
    var TranslationController = (
      /** @class */
      function() {
        function TranslationController2() {
          this.handlers = /* @__PURE__ */ new Map();
        }
        TranslationController2.prototype.emit = function(event, detail) {
          var handlerList = this.handlers.get(event) || [];
          for (var _i = 0, handlerList_1 = handlerList; _i < handlerList_1.length; _i++) {
            var h = handlerList_1[_i];
            h(event, detail);
          }
        };
        TranslationController2.prototype.on = function(event, handler) {
          var handlerList = this.handlers.get(event) || [];
          this.handlers.set(event, handlerList.concat(handler));
        };
        TranslationController2.prototype.off = function(event, handler) {
          var handlerList = this.handlers.get(event) || [];
          this.handlers.set(
            event,
            handlerList.filter(function(h) {
              return h !== handler;
            })
          );
        };
        return TranslationController2;
      }()
    );
    var CURRENT_LANGUAGE_COOKIE_NAME = "sCurrLanguage";
    function saveCurrentLanguage(language, cookieDomain) {
      return __awaiter(this, void 0, void 0, function() {
        return __generator(this, function(_b) {
          switch (_b.label) {
            case 0:
              _b.trys.push([0, 2, , 3]);
              return [4, setFrontendCookie(CURRENT_LANGUAGE_COOKIE_NAME, language, cookieDomain)];
            case 1:
              _b.sent();
              return [3, 3];
            case 2:
              _b.sent();
              return [3, 3];
            case 3:
              return [
                2
                /*return*/
              ];
          }
        });
      });
    }
    function getCurrentLanguageFromCookie() {
      return __awaiter(this, void 0, void 0, function() {
        return __generator(this, function(_b) {
          switch (_b.label) {
            case 0:
              _b.trys.push([0, 2, , 3]);
              return [4, getCookieValue(CURRENT_LANGUAGE_COOKIE_NAME)];
            case 1:
              return [2, _b.sent()];
            case 2:
              _b.sent();
              return [2, null];
            case 3:
              return [
                2
                /*return*/
              ];
          }
        });
      });
    }
    var SuperTokens = (
      /** @class */
      function() {
        function SuperTokens2(config) {
          var _this = this;
          this.recipeList = [];
          this.changeLanguage = function(lang) {
            return __awaiter(_this, void 0, void 0, function() {
              return __generator(this, function(_a) {
                switch (_a.label) {
                  case 0:
                    return [
                      4,
                      saveCurrentLanguage(lang, this.languageTranslations.currentLanguageCookieScope)
                    ];
                  case 1:
                    _a.sent();
                    this.languageTranslations.translationEventSource.emit("LanguageChange", lang);
                    return [
                      2
                      /*return*/
                    ];
                }
              });
            });
          };
          this.redirectToAuth = function(options) {
            return __awaiter(_this, void 0, void 0, function() {
              var queryParams, redirectUrl;
              return __generator(this, function(_a) {
                switch (_a.label) {
                  case 0:
                    queryParams = options.queryParams === void 0 ? {} : options.queryParams;
                    if (options.show !== void 0) {
                      queryParams.show = options.show;
                    }
                    if (options.redirectBack === true) {
                      queryParams.redirectToPath = getCurrentNormalisedUrlPath().getAsStringDangerous();
                    }
                    return [
                      4,
                      this.getRedirectUrl({
                        action: "TO_AUTH",
                        showSignIn: options.show === "signin"
                      })
                    ];
                  case 1:
                    redirectUrl = _a.sent();
                    redirectUrl = appendQueryParamsToURL(redirectUrl, queryParams);
                    return [2, this.redirectToUrl(redirectUrl, options.history)];
                }
              });
            });
          };
          this.redirectToUrl = function(redirectUrl, history) {
            return __awaiter(_this, void 0, void 0, function() {
              return __generator(this, function(_a) {
                doRedirection(this.appInfo, redirectUrl, history);
                return [
                  2
                  /*return*/
                ];
              });
            });
          };
          this.appInfo = normaliseInputAppInfoOrThrowError(config.appInfo);
          if (config.recipeList === void 0 || config.recipeList.length === 0) {
            throw new Error(
              "Please provide at least one recipe to the supertokens.init function call. See https://supertokens.io/docs/emailpassword/quick-setup/frontend"
            );
          }
          var translationConfig = config.languageTranslations === void 0 ? {} : config.languageTranslations;
          this.languageTranslations = {
            defaultLanguage: translationConfig.defaultLanguage === void 0 ? "en" : translationConfig.defaultLanguage,
            currentLanguageCookieScope: translationConfig.currentLanguageCookieScope !== void 0 ? normaliseCookieScopeOrThrowError(translationConfig.currentLanguageCookieScope) : getDefaultCookieScope(),
            userTranslationStore: translationConfig.translations !== void 0 ? translationConfig.translations : {},
            translationEventSource: new TranslationController(),
            userTranslationFunc: translationConfig.translationFunc
          };
          var enableDebugLogs = false;
          if (config.enableDebugLogs !== void 0) {
            enableDebugLogs = config.enableDebugLogs;
          }
          this.userGetRedirectionURL = config.getRedirectionURL;
          this.recipeList = config.recipeList.map(function(_a) {
            var authReact = _a.authReact;
            return authReact(_this.appInfo, enableDebugLogs);
          });
        }
        SuperTokens2.init = function(config) {
          var _a;
          cookieHandler.CookieHandlerReference.init(config.cookieHandler);
          windowHandler.WindowHandlerReference.init(config.windowHandler);
          if (SuperTokens2.instance !== void 0) {
            console.warn("SuperTokens was already initialized");
            return;
          }
          SuperTokens2.usesDynamicLoginMethods = (_a = config.usesDynamicLoginMethods) !== null && _a !== void 0 ? _a : false;
          var recipes = config.recipeList.find(function(recipe) {
            return recipe.recipeID === Multitenancy.RECIPE_ID;
          }) !== void 0 ? config.recipeList : config.recipeList.concat(Multitenancy.init({}));
          SuperTokensWebJS__default.default.init(
            exports.__assign(exports.__assign({}, config), {
              recipeList: recipes.map(function(_a2) {
                var webJS = _a2.webJS;
                return webJS;
              })
            })
          );
          SuperTokens2.instance = new SuperTokens2(exports.__assign(exports.__assign({}, config), { recipeList: recipes }));
          postSuperTokensInitCallbacks.PostSuperTokensInitCallbacks.runPostInitCallbacks();
        };
        SuperTokens2.getInstanceOrThrow = function() {
          if (SuperTokens2.instance === void 0) {
            var error = "SuperTokens must be initialized before calling this method.";
            if (typeof window === "undefined") {
              error = error + SSR_ERROR;
            }
            throw new Error(error);
          }
          return SuperTokens2.instance;
        };
        SuperTokens2.prototype.getRecipeOrThrow = function(recipeId) {
          var recipe = this.recipeList.find(function(recipe2) {
            return recipe2.config.recipeId === recipeId;
          });
          if (recipe === void 0) {
            throw new Error("Missing recipe: ".concat(recipeId));
          }
          return recipe;
        };
        SuperTokens2.prototype.loadTranslation = function(store) {
          this.languageTranslations.translationEventSource.emit("TranslationLoaded", store);
        };
        SuperTokens2.prototype.getRedirectUrl = function(context) {
          return __awaiter(this, void 0, void 0, function() {
            var userRes, redirectUrl;
            return __generator(this, function(_a) {
              switch (_a.label) {
                case 0:
                  if (!this.userGetRedirectionURL)
                    return [3, 2];
                  return [4, this.userGetRedirectionURL(context)];
                case 1:
                  userRes = _a.sent();
                  if (userRes !== void 0) {
                    return [2, userRes];
                  }
                  _a.label = 2;
                case 2:
                  if (context.action === "TO_AUTH") {
                    redirectUrl = this.appInfo.websiteBasePath.getAsStringDangerous();
                    return [2, appendTrailingSlashToURL(redirectUrl)];
                  }
                  throw new Error("Should never come here: unexpected redirection context");
              }
            });
          });
        };
        SuperTokens2.reset = function() {
          if (!isTest()) {
            return;
          }
          SuperTokens2.instance = void 0;
          return;
        };
        SuperTokens2.usesDynamicLoginMethods = false;
        return SuperTokens2;
      }()
    );
    function doRedirection(appInfo, redirectUrl, history) {
      try {
        new URL(redirectUrl);
      } catch (e) {
        var origin_1 = getOriginOfPage().getAsStringDangerous();
        if (origin_1 !== appInfo.websiteDomain.getAsStringDangerous()) {
          redirectUrl = "".concat(appInfo.websiteDomain.getAsStringDangerous()).concat(redirectUrl);
          redirectWithFullPageReload(redirectUrl);
          return;
        }
        if (history !== void 0) {
          redirectWithHistory(redirectUrl, history);
          return;
        }
      }
      redirectWithFullPageReload(redirectUrl);
    }
    var createGenericComponentsOverrideContext = function(v) {
      if (v === void 0) {
        v = {};
      }
      var genericContext = React__default.default.createContext(v);
      var useComponentsOverrideContext = function() {
        return React__default.default.useContext(genericContext);
      };
      var Provider = function(_a) {
        var children = _a.children, components = _a.components;
        return jsxRuntime.jsx(genericContext.Provider, exports.__assign({ value: components }, { children }));
      };
      return [useComponentsOverrideContext, Provider, genericContext.Consumer];
    };
    exports.BaseRecipeModule = BaseRecipeModule;
    exports.Multitenancy = Multitenancy;
    exports.SSR_ERROR = SSR_ERROR;
    exports.ST_ROOT_ID = ST_ROOT_ID;
    exports.SuperTokens = SuperTokens;
    exports.__awaiter = __awaiter;
    exports.__extends = __extends;
    exports.__generator = __generator;
    exports.__rest = __rest;
    exports.__spreadArray = __spreadArray;
    exports.appendQueryParamsToURL = appendQueryParamsToURL;
    exports.clearErrorQueryParam = clearErrorQueryParam;
    exports.clearQueryParams = clearQueryParams;
    exports.createGenericComponentsOverrideContext = createGenericComponentsOverrideContext;
    exports.getCurrentLanguageFromCookie = getCurrentLanguageFromCookie;
    exports.getCurrentNormalisedUrlPath = getCurrentNormalisedUrlPath;
    exports.getLocalStorage = getLocalStorage;
    exports.getNormalisedUserContext = getNormalisedUserContext;
    exports.getQueryParams = getQueryParams;
    exports.getRedirectToPathFromURL = getRedirectToPathFromURL;
    exports.getURLHash = getURLHash;
    exports.isTest = isTest;
    exports.matchRecipeIdUsingQueryParams = matchRecipeIdUsingQueryParams;
    exports.mergeObjects = mergeObjects;
    exports.normaliseRecipeModuleConfig = normaliseRecipeModuleConfig;
    exports.redirectWithFullPageReload = redirectWithFullPageReload;
    exports.removeFromLocalStorage = removeFromLocalStorage;
    exports.setLocalStorage = setLocalStorage;
    exports.useOnMountAPICall = useOnMountAPICall;
    exports.validateForm = validateForm;
  }
});

// node_modules/supertokens-auth-react/lib/build/translationContext.js
var require_translationContext = __commonJS({
  "node_modules/supertokens-auth-react/lib/build/translationContext.js"(exports) {
    "use strict";
    var genericComponentOverrideContext = require_genericComponentOverrideContext();
    var jsxRuntime = require_jsx_runtime();
    var React = require_react();
    function _interopDefault(e) {
      return e && e.__esModule ? e : { default: e };
    }
    var React__default = _interopDefault(React);
    var errCB = function() {
      throw new Error("Cannot use translation func outside TranslationContext provider.");
    };
    var TranslationContext = React__default.default.createContext({
      translate: errCB
    });
    var useTranslation = function() {
      return React.useContext(TranslationContext).translate;
    };
    var TranslationContextProvider = function(_a) {
      var children = _a.children, defaultLanguage = _a.defaultLanguage, userTranslationFunc = _a.userTranslationFunc, defaultStore = _a.defaultStore, translationControlEventSource = _a.translationControlEventSource;
      var _b = React.useState(defaultStore), translationStore = _b[0], setTranslationStore = _b[1];
      var _c = React.useState(void 0), currentLanguage = _c[0], setCurrentLanguage = _c[1];
      React.useEffect(
        function() {
          function loadLanguageFromCookies() {
            return genericComponentOverrideContext.__awaiter(this, void 0, void 0, function() {
              var cookieLang, cookieLangTemp;
              return genericComponentOverrideContext.__generator(this, function(_a2) {
                switch (_a2.label) {
                  case 0:
                    return [4, genericComponentOverrideContext.getCurrentLanguageFromCookie()];
                  case 1:
                    cookieLang = _a2.sent();
                    cookieLangTemp = cookieLang === null ? defaultLanguage : cookieLang;
                    setCurrentLanguage(function(current) {
                      return current !== void 0 ? current : cookieLangTemp;
                    });
                    return [
                      2
                      /*return*/
                    ];
                }
              });
            });
          }
          void loadLanguageFromCookies();
        },
        [defaultLanguage, setCurrentLanguage]
      );
      React.useEffect(function() {
        var changeHandler = function(_eventName, detail) {
          setCurrentLanguage(detail);
        };
        var loadHandler = function(_eventName, detail) {
          setTranslationStore(function(os) {
            return genericComponentOverrideContext.mergeObjects(os, detail);
          });
        };
        translationControlEventSource.on("LanguageChange", changeHandler);
        translationControlEventSource.on("TranslationLoaded", loadHandler);
        return function() {
          translationControlEventSource.off("LanguageChange", changeHandler);
          translationControlEventSource.off("TranslationLoaded", loadHandler);
        };
      });
      var translateFunc = React.useCallback(
        function(key) {
          if (userTranslationFunc !== void 0) {
            return userTranslationFunc(key);
          }
          if (currentLanguage !== void 0) {
            var res = translationStore[currentLanguage] && translationStore[currentLanguage][key];
            var fallback = translationStore[defaultLanguage] && translationStore[defaultLanguage][key];
            if (res === void 0) {
              if (fallback !== void 0) {
                return fallback;
              }
              return key;
            }
            return res;
          }
          throw new Error("Should never come here");
        },
        [translationStore, currentLanguage, defaultLanguage, userTranslationFunc]
      );
      if (currentLanguage === void 0) {
        return null;
      }
      return jsxRuntime.jsx(
        TranslationContext.Provider,
        genericComponentOverrideContext.__assign({ value: { translate: translateFunc } }, { children })
      );
    };
    exports.TranslationContextProvider = TranslationContextProvider;
    exports.useTranslation = useTranslation;
  }
});

// node_modules/supertokens-web-js/recipe/session/index.js
var require_session2 = __commonJS({
  "node_modules/supertokens-web-js/recipe/session/index.js"(exports) {
    "use strict";
    function __export(m) {
      for (var p in m)
        if (!exports.hasOwnProperty(p))
          exports[p] = m[p];
    }
    exports.__esModule = true;
    __export(require_session());
  }
});

// node_modules/supertokens-auth-react/lib/build/recipeModule-shared.js
var require_recipeModule_shared = __commonJS({
  "node_modules/supertokens-auth-react/lib/build/recipeModule-shared.js"(exports) {
    "use strict";
    var genericComponentOverrideContext = require_genericComponentOverrideContext();
    var RecipeModule = (
      /** @class */
      function(_super) {
        genericComponentOverrideContext.__extends(RecipeModule2, _super);
        function RecipeModule2() {
          var _this = _super !== null && _super.apply(this, arguments) || this;
          _this.redirect = function(context, history, queryParams) {
            return genericComponentOverrideContext.__awaiter(_this, void 0, void 0, function() {
              var redirectUrl;
              return genericComponentOverrideContext.__generator(this, function(_a) {
                switch (_a.label) {
                  case 0:
                    return [4, this.getRedirectUrl(context)];
                  case 1:
                    redirectUrl = _a.sent();
                    redirectUrl = genericComponentOverrideContext.appendQueryParamsToURL(
                      redirectUrl,
                      queryParams
                    );
                    return [
                      2,
                      genericComponentOverrideContext.SuperTokens.getInstanceOrThrow().redirectToUrl(
                        redirectUrl,
                        history
                      )
                    ];
                }
              });
            });
          };
          _this.getRedirectUrl = function(context) {
            return genericComponentOverrideContext.__awaiter(_this, void 0, void 0, function() {
              var redirectUrl;
              return genericComponentOverrideContext.__generator(this, function(_a) {
                switch (_a.label) {
                  case 0:
                    return [4, this.config.getRedirectionURL(context)];
                  case 1:
                    redirectUrl = _a.sent();
                    if (redirectUrl !== void 0) {
                      return [2, redirectUrl];
                    }
                    return [4, this.getDefaultRedirectionURL(context)];
                  case 2:
                    return [2, _a.sent()];
                }
              });
            });
          };
          return _this;
        }
        RecipeModule2.prototype.getDefaultRedirectionURL = function(_) {
          return genericComponentOverrideContext.__awaiter(this, void 0, void 0, function() {
            return genericComponentOverrideContext.__generator(this, function(_a) {
              throw new Error("getDefaultRedirectionURL is not implemented.");
            });
          });
        };
        return RecipeModule2;
      }(genericComponentOverrideContext.BaseRecipeModule)
    );
    exports.RecipeModule = RecipeModule;
  }
});

// node_modules/supertokens-auth-react/lib/build/session-shared2.js
var require_session_shared2 = __commonJS({
  "node_modules/supertokens-auth-react/lib/build/session-shared2.js"(exports) {
    "use strict";
    var genericComponentOverrideContext = require_genericComponentOverrideContext();
    var WebJSSessionRecipe = require_session2();
    var index = require_recipeModule_shared();
    var utils = require_utils2();
    function _interopDefault(e) {
      return e && e.__esModule ? e : { default: e };
    }
    var WebJSSessionRecipe__default = _interopDefault(WebJSSessionRecipe);
    function normaliseSessionConfig(config) {
      var _a, _b;
      if (config === void 0) {
        config = {};
      }
      var accessDeniedScreenStyle = (_b = (_a = config.accessDeniedScreen) === null || _a === void 0 ? void 0 : _a.style) !== null && _b !== void 0 ? _b : "";
      var accessDeniedScreen = {
        style: accessDeniedScreenStyle
      };
      var override = genericComponentOverrideContext.__assign(
        {
          functions: function(originalImplementation) {
            return originalImplementation;
          }
        },
        config.override
      );
      return genericComponentOverrideContext.__assign(
        genericComponentOverrideContext.__assign(
          {},
          genericComponentOverrideContext.normaliseRecipeModuleConfig(config)
        ),
        { accessDeniedScreen, override }
      );
    }
    var getFailureRedirectionInfo = function(_a) {
      var invalidClaims = _a.invalidClaims, overrideGlobalClaimValidators = _a.overrideGlobalClaimValidators, userContext = _a.userContext;
      return genericComponentOverrideContext.__awaiter(void 0, void 0, void 0, function() {
        var globalValidators, failedClaim, _loop_1, _i, globalValidators_1, validator, state_1;
        return genericComponentOverrideContext.__generator(this, function(_b) {
          switch (_b.label) {
            case 0:
              globalValidators = utils.getGlobalClaimValidators({
                overrideGlobalClaimValidators,
                userContext
              });
              failedClaim = void 0;
              _loop_1 = function(validator2) {
                var claim, failureCallback, redirectPath;
                return genericComponentOverrideContext.__generator(this, function(_c) {
                  switch (_c.label) {
                    case 0:
                      claim = invalidClaims.find(function(c) {
                        return c.validatorId === validator2.id;
                      });
                      if (!(claim !== void 0))
                        return [3, 2];
                      failureCallback = validator2.onFailureRedirection;
                      if (!failureCallback)
                        return [3, 2];
                      return [
                        4,
                        failureCallback({ reason: claim.reason, userContext })
                      ];
                    case 1:
                      redirectPath = _c.sent();
                      if (redirectPath !== void 0) {
                        return [
                          2,
                          {
                            value: {
                              redirectPath,
                              failedClaim: claim
                            }
                          }
                        ];
                      }
                      _c.label = 2;
                    case 2:
                      if (validator2.showAccessDeniedOnFailure !== false && failedClaim === void 0) {
                        failedClaim = claim;
                      }
                      return [
                        2
                        /*return*/
                      ];
                  }
                });
              };
              _i = 0, globalValidators_1 = globalValidators;
              _b.label = 1;
            case 1:
              if (!(_i < globalValidators_1.length))
                return [3, 4];
              validator = globalValidators_1[_i];
              return [5, _loop_1(validator)];
            case 2:
              state_1 = _b.sent();
              if (typeof state_1 === "object")
                return [2, state_1.value];
              _b.label = 3;
            case 3:
              _i++;
              return [3, 1];
            case 4:
              return [
                2,
                {
                  redirectPath: void 0,
                  failedClaim
                }
              ];
          }
        });
      });
    };
    var Session = (
      /** @class */
      function(_super) {
        genericComponentOverrideContext.__extends(Session2, _super);
        function Session2(config, webJSRecipe) {
          if (webJSRecipe === void 0) {
            webJSRecipe = WebJSSessionRecipe__default.default;
          }
          var _this = _super.call(this, config) || this;
          _this.webJSRecipe = webJSRecipe;
          _this.recipeID = Session2.RECIPE_ID;
          _this.eventListeners = /* @__PURE__ */ new Set();
          _this.redirectionHandlersFromAuthRecipes = /* @__PURE__ */ new Map();
          _this.getUserId = function(input) {
            return _this.webJSRecipe.getUserId(input);
          };
          _this.getAccessToken = function(input) {
            return _this.webJSRecipe.getAccessToken(input);
          };
          _this.getClaimValue = function(input) {
            return _this.webJSRecipe.getClaimValue(input);
          };
          _this.getAccessTokenPayloadSecurely = function(input) {
            return genericComponentOverrideContext.__awaiter(_this, void 0, void 0, function() {
              return genericComponentOverrideContext.__generator(this, function(_a) {
                return [2, this.webJSRecipe.getAccessTokenPayloadSecurely(input)];
              });
            });
          };
          _this.doesSessionExist = function(input) {
            return _this.webJSRecipe.doesSessionExist(input);
          };
          _this.signOut = function(input) {
            return _this.webJSRecipe.signOut(input);
          };
          _this.attemptRefreshingSession = function() {
            return genericComponentOverrideContext.__awaiter(_this, void 0, void 0, function() {
              return genericComponentOverrideContext.__generator(this, function(_a) {
                return [2, this.webJSRecipe.attemptRefreshingSession()];
              });
            });
          };
          _this.validateClaims = function(input) {
            return _this.webJSRecipe.validateClaims(input);
          };
          _this.getInvalidClaimsFromResponse = function(input) {
            return _this.webJSRecipe.getInvalidClaimsFromResponse(input);
          };
          _this.addEventListener = function(listener) {
            _this.eventListeners.add(listener);
            return function() {
              return _this.eventListeners.delete(listener);
            };
          };
          _this.addAuthRecipeRedirectionHandler = function(rid, redirect) {
            _this.redirectionHandlersFromAuthRecipes.set(rid, redirect);
          };
          _this.validateGlobalClaimsAndHandleSuccessRedirection = function(redirectInfo, userContext, history) {
            return genericComponentOverrideContext.__awaiter(_this, void 0, void 0, function() {
              var invalidClaims, jsonContext, failureRedirectInfo, successContextStr, authRecipeRedirectHandler;
              return genericComponentOverrideContext.__generator(this, function(_a) {
                switch (_a.label) {
                  case 0:
                    return [4, this.doesSessionExist({ userContext })];
                  case 1:
                    if (!_a.sent()) {
                      return [
                        2,
                        genericComponentOverrideContext.SuperTokens.getInstanceOrThrow().redirectToAuth({
                          history,
                          redirectBack: false
                        })
                      ];
                    }
                    return [4, this.validateClaims({ userContext })];
                  case 2:
                    invalidClaims = _a.sent();
                    if (!(invalidClaims.length > 0))
                      return [3, 6];
                    if (!(redirectInfo !== void 0))
                      return [3, 4];
                    jsonContext = JSON.stringify(redirectInfo);
                    return [
                      4,
                      genericComponentOverrideContext.setLocalStorage(
                        "supertokens-success-redirection-context",
                        jsonContext
                      )
                    ];
                  case 3:
                    _a.sent();
                    _a.label = 4;
                  case 4:
                    return [
                      4,
                      getFailureRedirectionInfo({
                        invalidClaims,
                        userContext
                      })
                    ];
                  case 5:
                    failureRedirectInfo = _a.sent();
                    if (failureRedirectInfo.redirectPath !== void 0) {
                      return [
                        2,
                        genericComponentOverrideContext.SuperTokens.getInstanceOrThrow().redirectToUrl(
                          failureRedirectInfo.redirectPath,
                          history
                        )
                      ];
                    }
                    _a.label = 6;
                  case 6:
                    if (!(redirectInfo === void 0))
                      return [3, 13];
                    return [
                      4,
                      genericComponentOverrideContext.getLocalStorage(
                        "supertokens-success-redirection-context"
                      )
                    ];
                  case 7:
                    successContextStr = _a.sent();
                    if (!(successContextStr !== null))
                      return [3, 12];
                    _a.label = 8;
                  case 8:
                    _a.trys.push([8, , 9, 11]);
                    redirectInfo = JSON.parse(successContextStr);
                    return [3, 11];
                  case 9:
                    return [
                      4,
                      genericComponentOverrideContext.removeFromLocalStorage(
                        "supertokens-success-redirection-context"
                      )
                    ];
                  case 10:
                    _a.sent();
                    return [
                      7
                      /*endfinally*/
                    ];
                  case 11:
                    return [3, 13];
                  case 12:
                    redirectInfo = {
                      rid: Session2.RECIPE_ID,
                      successRedirectContext: {
                        action: "SUCCESS",
                        isNewRecipeUser: false,
                        user: void 0
                      }
                    };
                    _a.label = 13;
                  case 13:
                    authRecipeRedirectHandler = this.redirectionHandlersFromAuthRecipes.get(redirectInfo.rid);
                    if (authRecipeRedirectHandler !== void 0) {
                      return [
                        2,
                        authRecipeRedirectHandler(redirectInfo.successRedirectContext, history)
                      ];
                    }
                    return [2, this.redirect(redirectInfo.successRedirectContext, history)];
                }
              });
            });
          };
          _this.getDefaultRedirectionURL = function() {
            return genericComponentOverrideContext.__awaiter(_this, void 0, void 0, function() {
              return genericComponentOverrideContext.__generator(this, function(_a) {
                return [2, "/"];
              });
            });
          };
          _this.notifyListeners = function(event) {
            return genericComponentOverrideContext.__awaiter(_this, void 0, void 0, function() {
              var sessionContext;
              return genericComponentOverrideContext.__generator(this, function(_a) {
                switch (_a.label) {
                  case 0:
                    return [4, this.getSessionContext(event)];
                  case 1:
                    sessionContext = _a.sent();
                    Array.from(this.eventListeners).forEach(function(listener) {
                      return listener(
                        genericComponentOverrideContext.__assign({ sessionContext }, event)
                      );
                    });
                    return [
                      2
                      /*return*/
                    ];
                }
              });
            });
          };
          return _this;
        }
        Session2.prototype.getSessionContext = function(_a) {
          var action = _a.action, userContext = _a.userContext;
          return genericComponentOverrideContext.__awaiter(this, void 0, void 0, function() {
            var _b, userId, accessTokenPayload;
            return genericComponentOverrideContext.__generator(this, function(_c) {
              switch (_c.label) {
                case 0:
                  if (!(action === "SESSION_CREATED" || action === "REFRESH_SESSION" || action === "API_INVALID_CLAIM" || action === "ACCESS_TOKEN_PAYLOAD_UPDATED"))
                    return [3, 2];
                  return [
                    4,
                    Promise.all([
                      this.getUserId({
                        userContext
                      }),
                      this.getAccessTokenPayloadSecurely({
                        userContext
                      })
                    ])
                  ];
                case 1:
                  _b = _c.sent(), userId = _b[0], accessTokenPayload = _b[1];
                  return [
                    2,
                    {
                      doesSessionExist: true,
                      accessTokenPayload,
                      userId
                    }
                  ];
                case 2:
                  if (action === "SIGN_OUT" || action === "UNAUTHORISED") {
                    return [
                      2,
                      {
                        doesSessionExist: false,
                        accessTokenPayload: {},
                        userId: ""
                      }
                    ];
                  }
                  throw new Error("Unhandled recipe event: ".concat(action));
              }
            });
          });
        };
        Session2.addAxiosInterceptors = function(axiosInstance, userContext) {
          return WebJSSessionRecipe__default.default.addAxiosInterceptors(axiosInstance, userContext);
        };
        Session2.init = function(config) {
          var _this = this;
          var normalisedConfig = normaliseSessionConfig(config);
          return {
            recipeID: Session2.RECIPE_ID,
            authReact: function(appInfo) {
              Session2.instance = new Session2(
                genericComponentOverrideContext.__assign(
                  genericComponentOverrideContext.__assign({}, normalisedConfig),
                  { appInfo, recipeId: Session2.RECIPE_ID }
                )
              );
              return Session2.instance;
            },
            webJS: WebJSSessionRecipe__default.default.init(
              genericComponentOverrideContext.__assign(
                genericComponentOverrideContext.__assign({}, normalisedConfig),
                {
                  onHandleEvent: function(event) {
                    if (normalisedConfig.onHandleEvent !== void 0) {
                      normalisedConfig.onHandleEvent(event);
                    }
                    void Session2.getInstanceOrThrow().notifyListeners(event);
                  },
                  preAPIHook: function(context) {
                    return genericComponentOverrideContext.__awaiter(_this, void 0, void 0, function() {
                      var response;
                      return genericComponentOverrideContext.__generator(this, function(_a) {
                        response = genericComponentOverrideContext.__assign(
                          genericComponentOverrideContext.__assign({}, context),
                          {
                            requestInit: genericComponentOverrideContext.__assign(
                              genericComponentOverrideContext.__assign({}, context.requestInit),
                              {
                                headers: genericComponentOverrideContext.__assign(
                                  genericComponentOverrideContext.__assign(
                                    {},
                                    context.requestInit.headers
                                  ),
                                  { rid: Session2.RECIPE_ID }
                                )
                              }
                            )
                          }
                        );
                        if (normalisedConfig.preAPIHook === void 0) {
                          return [2, response];
                        } else {
                          return [2, normalisedConfig.preAPIHook(context)];
                        }
                      });
                    });
                  }
                }
              )
            )
          };
        };
        Session2.getInstanceOrThrow = function() {
          if (Session2.instance === void 0) {
            throw Error(
              "No instance of Session found. Make sure to call the Session.init method. See https://supertokens.io/docs/emailpassword/quick-setup/frontend"
            );
          }
          return Session2.instance;
        };
        Session2.getInstance = function() {
          return Session2.instance;
        };
        Session2.reset = function() {
          if (!genericComponentOverrideContext.isTest()) {
            return;
          }
          Session2.instance = void 0;
          return;
        };
        Session2.RECIPE_ID = "session";
        return Session2;
      }(index.RecipeModule)
    );
    exports.Session = Session;
    exports.getFailureRedirectionInfo = getFailureRedirectionInfo;
  }
});

export {
  require_supertokens_web_js,
  require_cookieHandler4 as require_cookieHandler,
  require_postSuperTokensInitCallbacks2 as require_postSuperTokensInitCallbacks,
  require_windowHandler3 as require_windowHandler,
  require_multitenancy2 as require_multitenancy,
  require_utils2 as require_utils,
  require_normalisedURLDomain2 as require_normalisedURLDomain,
  require_normalisedURLPath2 as require_normalisedURLPath,
  require_genericComponentOverrideContext,
  require_translationContext,
  require_session2 as require_session,
  require_recipeModule_shared,
  require_session_shared2
};
//# sourceMappingURL=chunk-OH2XL3O4.js.map
